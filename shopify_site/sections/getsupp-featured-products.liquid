{% comment %} 
                GetSupp Featured Products Section 
                Displays featured products in a grid layout
{% endcomment %}

{% assign collection = collections[section.settings.collection] | default: collections.all %}
{% assign products_to_show = section.settings.products_to_show | default: 8 %}

<div class="getsupp-featured-products">
  <div class="getsupp-featured-container">
    <div class="getsupp-featured-header">
      <h2 class="getsupp-featured-title">{{ section.settings.title | default: "Featured Products" }}</h2>
      <p class="getsupp-featured-description">{{ section.settings.description | default: "Discover our most popular and trusted supplements" }}</p>
    </div>

    <div class="getsupp-featured-grid">
      {% for product in collection.products limit: products_to_show %}
        <div class="getsupp-product-card">
          <a href="{{ product.url }}" class="getsupp-product-link">
            <div class="getsupp-product-image">
              {% if product.featured_image %}
                <img
                  src="{{ product.featured_image | img_url: '300x300' }}"
                  alt="{{ product.title }}"
                  class="getsupp-product-img"
                  width="300"
                  height="300">
              {% else %}
                <div class="getsupp-product-placeholder">
                  <svg
                    width="60"
                    height="60"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <rect
                      x="3"
                      y="3"
                      width="18"
                      height="18"
                      rx="2"
                      stroke="#24BAAD"
                      stroke-width="2" />
                    <path
                      d="M9 9h6v6H9z"
                      stroke="#24BAAD"
                      stroke-width="2" />
                  </svg>
                </div>
              {% endif %}
              {% if product.compare_at_price > product.price %}
                <div class="getsupp-product-badge">Sale</div>
              {% endif %}
            </div>
            <div class="getsupp-product-info">
              <h3 class="getsupp-product-title">{{ product.title }}</h3>
              <p class="getsupp-product-vendor">{{ product.vendor }}</p>
              <div class="getsupp-product-price">
                {% if product.compare_at_price > product.price %}
                  <span class="getsupp-price-compare">₹{{ product.compare_at_price | money_without_currency }}</span>
                  <span class="getsupp-price-current">₹{{ product.price | money_without_currency }}</span>
                {% else %}
                  <span class="getsupp-price-current">₹{{ product.price | money_without_currency }}</span>
                {% endif %}
              </div>
              {% if product.available %}
                <div class="getsupp-product-rating">
                  <div class="getsupp-stars">
                    <span class="getsupp-star">★</span>
                    <span class="getsupp-star">★</span>
                    <span class="getsupp-star">★</span>
                    <span class="getsupp-star">★</span>
                    <span class="getsupp-star">★</span>
                  </div>
                  <span class="getsupp-rating-text">(4.5)</span>
                </div>
              {% else %}
                <div class="getsupp-product-sold-out">Sold Out</div>
              {% endif %}
            </div>
          </a>
          {% if product.available %}
            <form
              action="{{ routes.cart_add_url }}"
              method="post"
              enctype="multipart/form-data"
              class="getsupp-product-form">
              <input
                type="hidden"
                name="id"
                value="{{ product.selected_or_first_available_variant.id }}">
              <input
                type="hidden"
                name="return_to"
                value="{{ routes.cart_url }}">
              <button type="submit" class="getsupp-add-to-cart">
                <svg
                  width="16"
                  height="16"
                  viewBox="0 0 24 24"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg">
                  <path
                    d="M3 3h2l.4 2M7 13h10l4-8H5.4m0 0L7 13m0 0l-2.5 5M7 13l2.5 5m0 0h8"
                    stroke="currentColor"
                    stroke-width="2"
                    stroke-linecap="round"
                    stroke-linejoin="round" />
                </svg>
                Add to Cart
              </button>
            </form>
          {% endif %}
        </div>
      {% endfor %}
    </div>

    {% if section.settings.show_view_all and collection.url %}
      <div class="getsupp-featured-footer">
        <a href="{{ collection.url }}" class="getsupp-view-all-btn">
          {{ section.settings.view_all_text | default: "View All Products" }}
          <svg
            width="16"
            height="16"
            viewBox="0 0 24 24"
            fill="none"
            xmlns="http://www.w3.org/2000/svg">
            <path
              d="M5 12h14m-7-7l7 7-7 7"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round" />
          </svg>
        </a>
      </div>
    {% endif %}
  </div>
</div>

{% stylesheet %}
  .getsupp-featured-products {
    padding: 80px 0;
    background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
    position: relative;
    overflow: hidden;
  }

  .getsupp-featured-products::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="hexagons" width="30" height="30" patternUnits="userSpaceOnUse"><polygon points="15, 5 25, 10 25, 20 15, 25 5, 20 5, 10" fill="none" stroke="%2324BAAD" stroke-width="0.5" opacity="0.1"/></pattern></defs><rect width="100" height="100" fill="url(%23hexagons)"/></svg>');
    opacity: 0.3;
  }

  .getsupp-featured-container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
    position: relative;
    z-index: 2;
  }

  .getsupp-featured-header {
    text-align: center;
    margin-bottom: 60px;
  }

  .getsupp-featured-title {
    font-size: 36px;
    font-weight: 700;
    color: #333;
    margin-bottom: 16px;
    font-family: 'Inter'
    , sans-serif;
  }

  .getsupp-featured-description {
    font-size: 18px;
    color: #666;
    max-width: 600px;
    margin: 0 auto;
    line-height: 1.6;
  }

  .getsupp-featured-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 30px;
    margin-bottom: 60px;
  }

  .getsupp-product-card {
    background: white;
    border-radius: 16px;
    overflow: hidden;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
    transition: all 0.3s ease;
    border: 1px solid #f0f0f0;
  }

  .getsupp-product-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 12px 40px rgba(4, 104, 63, 0.15);
    border-color: #04683F;
  }

  .getsupp-product-link {
    text-decoration: none;
    color: inherit;
    display: block;
  }

  .getsupp-product-image {
    position: relative;
    width: 100%;
    height: 200px;
    overflow: hidden;
    background: #f8f9fa;
  }

  .getsupp-product-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .getsupp-product-card:hover .getsupp-product-img {
    transform: scale(1.05);
  }

  .getsupp-product-placeholder {
    width: 100%;
    height: 100%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: #f0fdfc;
  }

  .getsupp-product-badge {
    position: absolute;
    top: 12px;
    left: 12px;
    background: #ff4757;
    color: white;
    padding: 4px 8px;
    border-radius: 6px;
    font-size: 12px;
    font-weight: 600;
  }

  .getsupp-product-info {
    padding: 20px;
  }

  .getsupp-product-title {
    font-size: 16px;
    font-weight: 600;
    color: #333;
    margin-bottom: 8px;
    line-height: 1.4;
    font-family: 'Inter'
    , sans-serif;
  }

  .getsupp-product-vendor {
    font-size: 14px;
    color: #666;
    margin-bottom: 12px;
  }

  .getsupp-product-price {
    margin-bottom: 12px;
  }

  .getsupp-price-current {
    font-size: 18px;
    font-weight: 700;
    color: #04683F;
  }

  .getsupp-price-compare {
    font-size: 14px;
    color: #999;
    text-decoration: line-through;
    margin-right: 8px;
  }

  .getsupp-product-rating {
    display: flex;
    align-items: center;
    gap: 8px;
  }

  .getsupp-stars {
    display: flex;
    gap: 2px;
  }

  .getsupp-star {
    color: #ffd700;
    font-size: 14px;
  }

  .getsupp-rating-text {
    font-size: 12px;
    color: #666;
  }

  .getsupp-product-sold-out {
    color: #ff4757;
    font-size: 14px;
    font-weight: 500;
  }

  .getsupp-product-form {
    padding: 0 20px 20px;
  }

  .getsupp-add-to-cart {
    width: 100%;
    background: #04683F;
    color: white;
    border: none;
    padding: 12px 16px;
    border-radius: 8px;
    font-size: 14px;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .getsupp-add-to-cart:hover {
    background: #035a3a;
    transform: translateY(-2px);
  }

  .getsupp-featured-footer {
    text-align: center;
  }

  .getsupp-view-all-btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: white;
    color: #04683F;
    border: 2px solid #04683F;
    padding: 16px 32px;
    border-radius: 12px;
    font-size: 16px;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
  }

  .getsupp-view-all-btn:hover {
    background: #04683F;
    color: white;
    transform: translateY(-2px);
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .getsupp-featured-products {
      padding: 60px 0;
    }

    .getsupp-featured-title {
      font-size: 28px;
    }

    .getsupp-featured-description {
      font-size: 16px;
    }

    .getsupp-featured-grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
    }

    .getsupp-product-image {
      height: 180px;
    }
  }

  @media (max-width: 480px) {
    .getsupp-featured-grid {
      grid-template-columns: 1fr;
    }
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "GetSupp Featured",
    "tag": "section",
    "class": "section",
    "settings": [
      {
        "type": "text",
        "id": "title",
        "label": "Title",
        "default": "Featured Products"
      },
      {
        "type": "textarea",
        "id": "description",
        "label": "Description",
        "default": "Discover our most popular and trusted supplements"
      },
      {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      },
      {
        "type": "range",
        "id": "products_to_show",
        "label": "Products to show",
        "min": 4,
        "max": 16,
        "step": 2,
        "default": 8
      }, {
        "type": "checkbox",
        "id": "show_view_all",
        "label": "Show 'View All' button",
        "default": true
      }, {
        "type": "text",
        "id": "view_all_text",
        "label": "View All button text",
        "default": "View All Products"
      }, {
        "type": "color_scheme",
        "id": "color_scheme",
        "label": "Color scheme",
        "default": "scheme-1"
      }
    ],
    "presets": [
      {
        "name": "GetSupp Featured"
      }
    ]
  }
{% endschema %}