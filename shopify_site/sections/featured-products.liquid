{% comment %}
  Featured products section for GetSupp-style homepage
{% endcomment %}

<div class="featured-products">
  <div class="container">
    {% if section.settings.heading != blank %}
      <h2 class="featured-products__heading">{{ section.settings.heading }}</h2>
    {% endif %}

    {% if section.settings.collection != blank %}
      <div class="featured-products__grid">
        {% for product in section.settings.collection.products limit: section.settings.products_to_show %}
          <div class="featured-products__item">
            <div class="featured-products__image">
              {% if product.featured_image %}
                {% render 'image'
                  , image: product.featured_image
                  , alt: product.title %}
              {% else %}
                <div class="featured-products__placeholder">
                  <svg
                    width="60"
                    height="60"
                    viewBox="0 0 24 24"
                    fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <rect
                      x="3"
                      y="3"
                      width="18"
                      height="18"
                      rx="2"
                      stroke="currentColor"
                      stroke-width="2" />
                    <circle
                      cx="8.5"
                      cy="8.5"
                      r="1.5"
                      stroke="currentColor"
                      stroke-width="2" />
                    <path
                      d="M21 15L16 10L5 21"
                      stroke="currentColor"
                      stroke-width="2" />
                  </svg>
                </div>
              {% endif %}

              {% if product.compare_at_price > product.price %}
                <div class="featured-products__badge">
                  Sale
                </div>
              {% endif %}
            </div>

            <div class="featured-products__content">
              <h3 class="featured-products__title">
                <a href="{{ product.url }}">{{ product.title }}</a>
              </h3>

              <div class="featured-products__price">
                {% if product.compare_at_price > product.price %}
                  <span class="featured-products__price--sale">{{ product.price | money }}</span>
                  <span class="featured-products__price--compare">{{ product.compare_at_price | money }}</span>
                {% else %}
                  <span class="featured-products__price--regular">{{ product.price | money }}</span>
                {% endif %}
              </div>

              <div class="featured-products__rating">
                {% comment %} Add star rating here if available {% endcomment %}
                <div class="featured-products__stars">
                  ★★★★★
                </div>
                <span class="featured-products__reviews">({{ product.reviews_count | default: 0 }})</span>
              </div>

              <form
                action="/cart/add"
                method="post"
                enctype="multipart/form-data">
                <input
                  type="hidden"
                  name="id"
                  value="{{ product.selected_or_first_available_variant.id }}">
                <button type="submit" class="featured-products__button">
                  Add to Cart
                </button>
              </form>
            </div>
          </div>
        {% endfor %}
      </div>

      {% if section.settings.show_view_all %}
        <div class="featured-products__footer">
          <a href="{{ section.settings.collection.url }}" class="featured-products__view-all">
            View All Products
            <svg
              width="16"
              height="16"
              viewBox="0 0 16 16"
              fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <path
                d="M6 12L10 8L6 4"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round" />
            </svg>
          </a>
        </div>
      {% endif %}
    {% endif %}
  </div>
</div>

{% stylesheet %}
  .featured-products {
    padding: 4rem 0;
    background-color: white;
  }

  .container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
  }

  .featured-products__heading {
    text-align: center;
    font-size: 2.5rem;
    font-weight: bold;
    color: #333;
    margin-bottom: 3rem;
  }

  .featured-products__grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 2rem;
    margin-bottom: 3rem;
  }

  .featured-products__item {
    background: white;
    border-radius: 12px;
    overflow: hidden;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: transform 0.3s ease
    , box-shadow 0.3s ease;
    border: 1px solid #e9ecef;
  }

  .featured-products__item:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
  }

  .featured-products__image {
    position: relative;
    height: 200px;
    overflow: hidden;
  }

  .featured-products__image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
  }

  .featured-products__placeholder {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    color: #ccc;
  }

  .featured-products__badge {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    background-color: #dc3545;
    color: white;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: bold;
  }

  .featured-products__content {
    padding: 1.5rem;
  }

  .featured-products__title {
    margin-bottom: 0.5rem;
  }

  .featured-products__title a {
    color: #333;
    text-decoration: none;
    font-size: 1.1rem;
    font-weight: 500;
  }

  .featured-products__title a:hover {
    color: #24BAAD;
  }

  .featured-products__price {
    margin-bottom: 0.5rem;
  }

  .featured-products__price--sale {
    color: #dc3545;
    font-weight: bold;
    font-size: 1.1rem;
  }

  .featured-products__price--compare {
    color: #999;
    text-decoration: line-through;
    margin-left: 0.5rem;
  }

  .featured-products__price--regular {
    color: #333;
    font-weight: bold;
    font-size: 1.1rem;
  }

  .featured-products__rating {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 1rem;
  }

  .featured-products__stars {
    color: #ffc107;
    font-size: 0.9rem;
  }

  .featured-products__reviews {
    color: #666;
    font-size: 0.9rem;
  }

  .featured-products__button {
    width: 100%;
    background-color: #24BAAD;
    color: white;
    border: none;
    padding: 0.75rem 1rem;
    border-radius: 6px;
    font-weight: 500;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .featured-products__button:hover {
    background-color: #1a9b8f;
  }

  .featured-products__footer {
    text-align: center;
  }

  .featured-products__view-all {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    color: #24BAAD;
    text-decoration: none;
    font-weight: 500;
    font-size: 1.1rem;
    padding: 1rem 2rem;
    border: 2px solid #24BAAD;
    border-radius: 50px;
    transition: all 0.3s ease;
  }

  .featured-products__view-all:hover {
    background-color: #24BAAD;
    color: white;
  }

  .featured-products__view-all svg {
    transition: transform 0.3s ease;
  }

  .featured-products__view-all:hover svg {
    transform: translateX(4px);
  }

  @media (max-width: 768px) {
    .featured-products {
      padding: 2rem 0;
    }

    .featured-products__heading {
      font-size: 2rem;
      margin-bottom: 2rem;
    }

    .featured-products__grid {
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 1.5rem;
    }
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "Featured Products",
    "settings": [
      {
        "type": "text",
        "id": "heading",
        "label": "Heading",
        "default": "Featured Products"
      }, {
        "type": "collection",
        "id": "collection",
        "label": "Collection"
      }, {
        "type": "range",
        "id": "products_to_show",
        "label": "Products to show",
        "min": 2,
        "max": 12,
        "step": 1,
        "default": 8
      }, {
        "type": "checkbox",
        "id": "show_view_all",
        "label": "Show 'View All' button",
        "default": true
      }
    ],
    "presets": [
      {
        "name": "Featured Products",
        "category": "Homepage"
      }
    ]
  }
{% endschema %}