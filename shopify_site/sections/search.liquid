{% comment %} 
  This section is used in the search template to render search results for 
  products, articles, and pages. 
  https://shopify.dev/docs/storefronts/themes/architecture/templates/search
{% endcomment %}

<div class="search-page">
  <h1 class="search-page__title">{{ 'search.title' | t }}</h1>

  <form
    action="{{ routes.search_url }}"
    method="get"
    role="search"
    class="search-page__form">
    <input
      type="search"
      size="50"
      name="q"
      value="{{ search.terms | escape }}"
      placeholder="{{ 'search.placeholder' | t }}"
      class="search-page__input">
    <button type="submit" class="search-page__button">{{ 'search.submit' | t }}</button>
  </form>

  {% if search.performed %}
    {% if search.results_count == 0 %}
      <p>{{ 'search.no_results_html' | t: terms: search.terms }}</p>
    {% else %}
      <p>{{ 'search.results_for_html' | t: terms: search.terms, count: search.results_count }}</p>

      <div class="search-results">
        {% paginate search.results by 20 %}
          {% # Search result items may be an article, a page, or a product. %}
          {% for result in search.results %}
            <div class="search-result">
              {% assign featured_image = result.featured_image | default: result.image %}
              {% if featured_image %}
                {% render 'image'
                  , class: 'search-result__image'
                  , image: featured_image
                  , url: result.url
                  , width: 400 %}
              {% endif %}
              <div class="search-result__content">
                <p>
                  {{ result.title | link_to: result.url }}
                  {% if result.price %}
                    {{ result.price | money_with_currency }}
                  {% endif %}
                </p>
              </div>
            </div>
          {% endfor %}

          {{ paginate | default_pagination }}
        {% endpaginate %}
      </div>
    {% endif %}
  {% endif %}

</div>

{% stylesheet %}
  .search-page {
    max-width: 1100px;
    margin: 0 auto;
    padding: 2rem 1rem;
    text-align: center;
  }

  .search-page__title,
  .search-page__form,
  .search-page__input,
  .search-page__button,
  .search-results,
  .search-result,
  .search-result__content {
    font-family: inherit;
  }

  .search-page__title {
    margin: 0 0 1rem;
    font-size: 1.8rem;
    font-weight: 700;
  }

  .search-page__form {
    display: flex;
    justify-content: center;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 2rem;
  }

  .search-page__input {
    width: min(600px, 100%);
    padding: 0.75rem 1rem;
    border: 1px solid #e5e5e5;
    border-radius: 6px;
    font-size: 1rem;
  }

  .search-page__button {
    padding: 0.75rem 1rem;
    border: 1px solid #04683F;
    background: #04683F;
    color: #fff;
    border-radius: 6px;
    cursor: pointer;
    font-weight: 600;
  }

  .search-results {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 1rem;
    justify-items: center;
  }

  .search-result {
    width: 100%;
    max-width: 260px;
    background: #fff;
    border: 1px solid #eee;
    border-radius: 10px;
    padding: 0.75rem;
    text-align: left;
  }

  .search-result__image {
    display: block;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 0.5rem;
  }

  .search-result__content p {
    margin: 0.25rem 0 0;
    font-size: 0.95rem;
  }

  .search-results .prev,
  .search-results .page,
  .search-results .next {
    grid-column: 1 / -1;
  }
{% endstylesheet %}

{% schema %}
  {
    "name": "t:general.search",
    "settings": []
  }
{% endschema %}